<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>字符串</title>

  <script type="text/javascript">
    /* 查找字符串
    1、indexOf()/lastIndexOf()：获取字符串中指定内容的索引
    2、search()：获取字符串中指定内容的索引（参数里一般是正则）
    3、includes()：字符串中是否包含指定的内容
    4、startsWith()：字符串是否以指定的内容开头
    5、endsWith()：字符串是否以指定的内容结尾
    */

    // indexOf()/lastIndexOf()
    const str = 'abcdea';
    // 给字符查索引(索引值为0,说明字符串以查询的参数为开头)
    console.log(str.indexOf('c'));
    console.log(str.lastIndexOf('c'));
    console.log(str.indexOf('a'));
    console.log(str.lastIndexOf('a'));

    const name = 'helloworld';
    console.log(name.indexOf('wo'));

    result = name.indexOf('l', 4);
    console.log(result);

    // 举例: 
    var index = name.indexOf('l');
    var num = 0;
    while (index !== -1) {
      console.log(index);
      num++; // 每打印一次，就计数一次
      index = name.indexOf('o', index + 1);
    }

    console.log('l 出现的次数是：' + num);

    // 2. search()
    console.log(name.search('wo')); // 5

    // 3. includes()
    console.log(name.includes('wo'));
    console.log(name.includes('haha'));
    console.log(name.includes('wo', 6));

    // 4. startsWith()
    console.log(name.startsWith('h')); // true
    console.log(name.startsWith('a')); // false
    // 因为指定了起始位置为3，所以是在 loworld 这个字符串中检索
    console.log(name.startsWith('l', 3)); // true
    console.log(name.startsWith('c', 3)); // false

    // 5. endsWith()
    console.log(name.endsWith('d')); // true
    console.log(name.endsWith('e')); // false
    // 因为指定了截止位置为3，所以是在 hel 这个长度为3字符串中检索
    console.log(name.endsWith('l', 3)); // true
    console.log(name.endsWith('d', 3)); // false

    /* 获取指定位置的字符
    1、charAt(index)
    2、str[index]
    3、charCodeAt(index)
    */
    var str1 = new String('smyhvae');

    // 1. charAr(index)
    // 2. str[index]
    // 上面这个例子一般不用。一般打印数组和 json 的时候用索引，打印 String 不建议用索引。
    for (var i = 0; i < str1.length; i++) {
      console.log(str1.charAt(i));
      console.log(str1[i]);
    }

    // 3. charCodeAt(index)
    //    sort();   底层用到了charCodeAt();
    var str2 = 'I love my country!我爱你中国！';

    // 打印字符串的占位长度。
    // 提示：一个英文占一个位置，一个中文占两个位置。
    // 思路：判断该字符是否在 0-127 之间（在的话是英文，不在是非英文）。
    alert(getZFWlength(str2)); // 30
    alert(str2.length); // 24
    // 从打印结果可以看出：字符串的长度是 24，但是却占了 30 个字符位（一个中文占两个字符位）。

    function getZFWlength(string) {
      // 定义一个计数器
      var count = 0;
      for (var i = 0; i < string.length; i++) {
        // 对每一位字符串进行判断，如果Unicode编码在0-127，计数器+1；否则+2
        if (string.charCodeAt(i) < 128 && string.charCodeAt(i) >= 0) {
          count++;
        } else {
          count += 2;
        }
      }
      return count;
    }

    /* 字符串截取
    1、slice()
    2、substring()
    */

    // 1. slice() 用的最多
    var str3 = 'helloworld';
    console.log(str3.slice(2, 5)); // llo 截取时，包左不包右
    console.log(str3.slice(2));    // lloworld 表示从指定的索引位置开始，截取到最后
    console.log(str3.slice(-5));   // world 表示从倒数第5个开始，截取到最后
    console.log(str3.slice(1, -1));// elloworl 表示从第一个截取到倒数第一个
    console.log(str3.slice(5, 2)); // 表示前面的大，后面的小，返回值为空

    // 2. substring()
    // substring()不能接受负值作为参数。如果传递了一个负值，则默认使用 0
    // substring()还会自动调整参数的位置，如果第二个参数小于第一个，则自动交换。比如说， substring(1, 0)相当于截取的是第一个字符
    console.log(str3.substring(-1));
    console.log(str3.substring(1, 0));

    // 3. substr()
    console.log(str3.substr(2, 4)); // llow 从索引值为 2 的字符开始，截取 4 个字符
    console.log(str3.substr(1));    // elloworld 从指定位置开始，截取到最后
    console.log(str3.substr(-5));   
  </script>

</head>

<body>

</body>

</html>